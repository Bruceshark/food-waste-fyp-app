import{S as f,s as V,a as y}from"./request-e2b96923.js";import{f as m,g as A,u as N,o as t,h as s,i as o,j as e,k as r,t as l,l as k,m as b,w as I,F as D,n as S,p as P,q as R}from"./vue-router.esm-bundler-838e7efe.js";import{r as F,t as j,d as q}from"./dailyItem-c41d23f6.js";import{m as E}from"./mainHeader-b825e043.js";import{t as O,r as z,v as K,m as U,c as W}from"./tableware_icon-ac76e79a.js";import{_ as Y}from"./plugin-vueexport-helper-ae293a1c.js";import"./index-afdfb65a.js";f.setDefaultIndicator=V;f.install=function(i){return i.component(f.name,f),i};const n=i=>(P("data-v-7e965fbe"),i=i(),R(),i),G={class:"page"},J=n(()=>e("div",{class:"flex justify-between mx-6 mt-4 mb-2"},[e("div",{class:"text-lg font-bold"},"Overview")],-1)),Q={class:"section flex flex-col mx-auto"},X={class:"flex justify-between"},Z={class:"ring-chart",style:{width:"30%"}},$={style:{width:"70%"},class:"flex flex-col justify-around"},ee={class:"flex justify-between"},te={class:"flex"},se=n(()=>e("span",null,"Overall",-1)),ae={class:"text-center"},oe={key:0,class:"font-bold text-xl"},le={key:1,class:"font-bold text-xl"},ne=n(()=>e("span",null,"%",-1)),ie={class:"flex"},ce=n(()=>e("span",null,"Rice",-1)),re={class:"text-center"},de={key:0,class:"font-bold text-xl"},_e={key:1,class:"font-bold text-xl"},ue=n(()=>e("span",null,"%",-1)),ve={class:"flex"},me={class:"text-center"},fe={key:0,class:"font-bold text-xl"},he={key:1,class:"font-bold text-xl"},pe=n(()=>e("span",null,"%",-1)),xe={class:"flex"},ge={class:"text-center"},ye={key:0,class:"font-bold text-xl"},be={key:1,class:"font-bold text-xl"},we=n(()=>e("span",null,"%",-1)),ke={key:0,class:"desc text-xs"},Ie={key:0,class:"text-xs text-center compare"},De=n(()=>e("div",{class:"text-lg font-bold"},"My badge wall",-1)),Se={class:"section mx-auto"},je={class:"flex"},Ce=["src"],He={class:"flex justify-between mx-6 mt-4"},Te=n(()=>e("div",{class:"text-lg font-bold"},"My history",-1)),Le={key:0},Be={key:1,class:"m-4 text-center"},Me={class:"fixed bottom-5 right-3 flex-col image-wrapper pos"},Ve={__name:"Home",setup(i){const a=m(),d=m(),h=m(),C="https://fyp-smart-canteen.s3.ap-northeast-1.amazonaws.com/badges/",p=m(null),c=m(null),w=3,H=async()=>{let _=await y("get","overview",{},!0);_.error===!1&&(a.value=_.result.curr_average,d.value=_.result.relative_average,h.value=_.result.time);let g=await y("get","history",{},!0);g.error===!1&&(c.value=g.result);let u=await y("get","badge",{},!0);u.error===!1&&(p.value=u.result)};A(()=>{H()});const x=N(),T=()=>{x.push({name:"History"})},L=()=>{x.push({name:"Create"})},B=()=>{x.push({name:"BadgeWall"})};return(_,g)=>{const u=f;return t(),s("div",G,[o(E),J,e("div",Q,[e("div",X,[e("div",Z,[o(F,{summary:a.value},null,8,["summary"])]),e("div",$,[e("div",ee,[e("div",null,[e("div",te,[o(r(O),{class:"summary-icon"}),se]),e("div",ae,[a.value?(t(),s("span",oe,l(a.value.overall),1)):(t(),s("span",le,"--")),ne])]),e("div",null,[e("div",ie,[o(r(z),{class:"summary-icon",fill:"#F39221"}),ce]),e("div",re,[a.value?(t(),s("span",de,l(a.value.rice),1)):(t(),s("span",_e,"--")),ue])]),e("div",null,[e("div",ve,[o(r(K),{class:"summary-icon",fill:"#68A885"}),k(" Vege ")]),e("div",me,[a.value?(t(),s("span",fe,l(a.value.vegetable),1)):(t(),s("span",he,"--")),pe])]),e("div",null,[e("div",xe,[o(r(U),{class:"summary-icon",fill:"#A81E2D"}),k(" Meat ")]),e("div",ge,[a.value?(t(),s("span",ye,l(a.value.meat),1)):(t(),s("span",be,"--")),we])])]),a.value?(t(),s("div",ke," Average data from "+l(r(j)(h.value.earliest))+" to "+l(r(j)(h.value.latest)),1)):b("",!0)])]),d.value?(t(),s("div",Ie," You're saving "+l(Math.abs(d.value.overall))+"% "+l(d.value.overall<0?"below":"above")+" the average of HKUST "+l(d.value.overall<0?"ðŸ¥º":"ðŸ¥³"),1)):b("",!0)]),e("div",{class:"flex justify-between mx-6 mt-4 mb-2"},[De,e("div",{class:"color-primary self-center",onClick:B}," show more ")]),o(u,{spinning:p.value===null,tip:"loading"},{default:I(()=>[e("div",Se,[e("div",je,[(t(!0),s(D,null,S(p.value,v=>(t(),s("img",{class:"badge-image mx-2",key:v.id,src:C+v.id+(v.progress===100?"_active.png":"_inactive.png")},null,8,Ce))),128))])])]),_:1},8,["spinning"]),o(u,{spinning:c.value===null,tip:"loading"},{default:I(()=>[e("div",He,[Te,c.value&&c.value.length>w?(t(),s("div",{key:0,class:"color-primary self-center",onClick:T}," show more ")):b("",!0)]),c.value&&c.value.length?(t(),s("div",Le,[(t(!0),s(D,null,S(c.value.slice(0,w),(v,M)=>(t(),s("div",{class:"flex justify-between items-center",key:M},[o(q,{data:v},null,8,["data"])]))),128))])):(t(),s("div",Be," Share your action and earn badges now ðŸ’ª "))]),_:1},8,["spinning"]),e("div",Me,[o(r(W),{class:"camera-image",onClick:L})])])}}},Oe=Y(Ve,[["__scopeId","data-v-7e965fbe"]]);export{Oe as default};
