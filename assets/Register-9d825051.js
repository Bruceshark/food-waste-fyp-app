import{S as x,a as w}from"./request-f687857f.js";import{f as l,u as b,o as y,h as S,i as k,w as I,Q as p,_ as u,j as t,p as R,q as V}from"./vue-router.esm-bundler-838e7efe.js";import{_ as C,m}from"./plugin-vueexport-helper-ae293a1c.js";import"./index-b8a16a98.js";const _=n=>(R("data-v-3eb1b80a"),n=n(),V(),n),T={class:"page"},U=_(()=>t("div",{class:"header flex text-center items-center"},[t("div",{class:"w-full text-3xl font-bold text-white"},"HKUST Food Minus")],-1)),N=_(()=>t("div",{class:"text-center text-2xl font-bold my-8"},"Sign up",-1)),B={__name:"Register",setup(n){const a=l(""),i=l(""),o=l(""),r=l(""),d=l(!1),g=async()=>{if(a.value.length===0||i.value.length===0||o.value.length===0||r.value.length===0){m.error("Please complete all fields");return}o.value!==r.value&&m.error("Passwords are not consistent"),d.value=!0;let c=await w("post","register",{itsc:a.value,name:i.value,password:o.value});if(d.value=!1,c.error===!1){let e=c.result;localStorage.setItem("food_minus_app",JSON.stringify({token:e,itsc:a.value})),v.push({path:"/"}),setTimeout(()=>{location.reload()},100)}},v=b(),f=()=>{v.push({path:"/login"})};return(c,e)=>{const h=x;return y(),S("div",T,[k(h,{spinning:d.value,tip:"Signing up"},{default:I(()=>[U,N,p(t("input",{type:"text",class:"input",placeholder:"ITSC","onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s)},null,512),[[u,a.value]]),p(t("input",{type:"text",class:"input",placeholder:"Nickname","onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s)},null,512),[[u,i.value]]),p(t("input",{type:"password",class:"input",placeholder:"Password","onUpdate:modelValue":e[2]||(e[2]=s=>o.value=s)},null,512),[[u,o.value]]),p(t("input",{type:"password",class:"input",placeholder:"Confirm password","onUpdate:modelValue":e[3]||(e[3]=s=>r.value=s)},null,512),[[u,r.value]]),t("span",{class:"text-btn color-primary",onClick:f},"Already have an account?"),t("div",{class:"btn-group"},[t("div",{class:"btn primary-btn bg-color-primary font-bold",onClick:g}," Signup ")])]),_:1},8,["spinning"])])}}},j=C(B,[["__scopeId","data-v-3eb1b80a"]]);export{j as default};
