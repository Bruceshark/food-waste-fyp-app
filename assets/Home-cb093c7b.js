import{S as h,s as V,a as y}from"./request-f099dbe5.js";import{f as m,u as A,g as N,h as P,i as F,o as s,j as t,k as o,l as e,m as d,t as l,n as I,p as b,w as D,F as S,q as j,s as q,v as E}from"./vue-router.esm-bundler-f47d5b1d.js";import{r as O,t as C,d as z}from"./dailyItem-d6630a94.js";import{m as K}from"./mainHeader-ea29bf25.js";import{t as U,r as W,v as Y,m as G,c as J}from"./tableware_icon-a25ec4a8.js";import{_ as Q}from"./plugin-vueexport-helper-b9105508.js";import"./index-cf400942.js";h.setDefaultIndicator=V;h.install=function(i){return i.component(h.name,h),i};const n=i=>(q("data-v-828e7d62"),i=i(),E(),i),X={class:"page"},Z=n(()=>e("div",{class:"flex justify-between mx-6 mt-4 mb-2"},[e("div",{class:"text-lg font-bold"},"Overview")],-1)),$={class:"section flex flex-col mx-auto"},ee={class:"flex justify-between"},se={class:"ring-chart",style:{width:"30%"}},te={style:{width:"70%"},class:"flex flex-col justify-around"},ae={class:"flex justify-between"},oe={class:"flex"},le=n(()=>e("span",null,"Overall",-1)),ne={class:"text-center"},ie={key:0,class:"font-bold text-xl"},ce={key:1,class:"font-bold text-xl"},re=n(()=>e("span",null,"%",-1)),de={class:"flex"},_e=n(()=>e("span",null,"Rice",-1)),ue={class:"text-center"},ve={key:0,class:"font-bold text-xl"},me={key:1,class:"font-bold text-xl"},he=n(()=>e("span",null,"%",-1)),fe={class:"flex"},pe={class:"text-center"},xe={key:0,class:"font-bold text-xl"},ge={key:1,class:"font-bold text-xl"},ye=n(()=>e("span",null,"%",-1)),be={class:"flex"},we={class:"text-center"},ke={key:0,class:"font-bold text-xl"},Ie={key:1,class:"font-bold text-xl"},De=n(()=>e("span",null,"%",-1)),Se={key:0,class:"desc text-xs"},je={key:0,class:"text-xs text-center compare"},Ce=n(()=>e("div",{class:"text-lg font-bold"},"My badge wall",-1)),He={class:"section mx-auto"},Te={class:"flex"},Le=["src"],Re={class:"flex justify-between mx-6 mt-4"},Be=n(()=>e("div",{class:"text-lg font-bold"},"My history",-1)),Me={key:0},Ve={key:1,class:"m-4 text-center"},Ae={class:"fixed bottom-5 right-3 flex-col image-wrapper pos"},Ne={__name:"Home",setup(i){const a=m(null),_=m(null),f=m(null),H="https://fyp-smart-canteen.s3.ap-northeast-1.amazonaws.com/badges/",p=m(null),c=m(null),w=3,k=async()=>{let r=await y("get","overview",{},!0);r.error===!1&&(a.value=r.result.curr_average,_.value=r.result.relative_average,f.value=r.result.time);let g=await y("get","history",{},!0);g.error===!1&&(c.value=g.result);let u=await y("get","badge",{},!0);u.error===!1&&(p.value=u.result)},x=A(),T=N();P(()=>{k()}),F(()=>T.params.needReload,async r=>{r&&k()});const L=()=>{x.push({name:"History"})},R=()=>{x.push({name:"Create"})},B=()=>{x.push({name:"BadgeWall"})};return(r,g)=>{const u=h;return s(),t("div",X,[o(K),Z,e("div",$,[e("div",ee,[e("div",se,[o(O,{summary:a.value},null,8,["summary"])]),e("div",te,[e("div",ae,[e("div",null,[e("div",oe,[o(d(U),{class:"summary-icon"}),le]),e("div",ne,[a.value?(s(),t("span",ie,l(a.value.overall),1)):(s(),t("span",ce,"--")),re])]),e("div",null,[e("div",de,[o(d(W),{class:"summary-icon",fill:"#F39221"}),_e]),e("div",ue,[a.value?(s(),t("span",ve,l(a.value.rice),1)):(s(),t("span",me,"--")),he])]),e("div",null,[e("div",fe,[o(d(Y),{class:"summary-icon",fill:"#68A885"}),I(" Vege ")]),e("div",pe,[a.value?(s(),t("span",xe,l(a.value.vegetable),1)):(s(),t("span",ge,"--")),ye])]),e("div",null,[e("div",be,[o(d(G),{class:"summary-icon",fill:"#A81E2D"}),I(" Meat ")]),e("div",we,[a.value?(s(),t("span",ke,l(a.value.meat),1)):(s(),t("span",Ie,"--")),De])])]),a.value?(s(),t("div",Se," Average data from "+l(d(C)(f.value.earliest))+" to "+l(d(C)(f.value.latest)),1)):b("",!0)])]),_.value?(s(),t("div",je," You're saving "+l(Math.abs(_.value.overall))+"% "+l(_.value.overall<0?"below":"above")+" the average of HKUST "+l(_.value.overall<0?"ðŸ¥º":"ðŸ¥³"),1)):b("",!0)]),e("div",{class:"flex justify-between mx-6 mt-4 mb-2"},[Ce,e("div",{class:"color-primary self-center",onClick:B}," show more ")]),o(u,{spinning:p.value===null,tip:"loading"},{default:D(()=>[e("div",He,[e("div",Te,[(s(!0),t(S,null,j(p.value,v=>(s(),t("img",{class:"badge-image mx-2",key:v.id,src:H+v.id+(v.progress===100?"_active.png":"_inactive.png")},null,8,Le))),128))])])]),_:1},8,["spinning"]),o(u,{spinning:c.value===null,tip:"loading"},{default:D(()=>[e("div",Re,[Be,c.value&&c.value.length>w?(s(),t("div",{key:0,class:"color-primary self-center",onClick:L}," show more ")):b("",!0)]),c.value&&c.value.length?(s(),t("div",Me,[(s(!0),t(S,null,j(c.value.slice(0,w),(v,M)=>(s(),t("div",{class:"flex justify-between items-center",key:M},[o(z,{data:v},null,8,["data"])]))),128))])):(s(),t("div",Ve," Share your action and earn badges now ðŸ’ª "))]),_:1},8,["spinning"]),e("div",Ae,[o(d(J),{class:"camera-image",onClick:R})])])}}},Ue=Q(Ne,[["__scopeId","data-v-828e7d62"]]);export{Ue as default};
