import{r as l,u as L,a as C,b as F,c as O,d as e,E as g,G as x,e as b,p as T,j as q}from"./index-49b465ad.js";import{_ as G}from"./camera-cf08fdea.js";import{m as W}from"./mainHeader-21d5be97.js";import{a as A}from"./request-41867bed.js";import{f as z,m as I}from"./plugin-vueexport-helper-2490749a.js";const n=r=>(T("data-v-4a8d6568"),r=r(),q(),r),J={class:"page"},K=["src"],Q=n(()=>e("img",{class:"camera-image place-self-center",src:G},null,-1)),X=[Q],Y={class:"slider-section"},Z=n(()=>e("div",null,"How much food did you finish overall?",-1)),$={class:"flex justify-between"},ee={class:"slider-section"},te=n(()=>e("div",null,"How much rice/noodle did you finish?",-1)),ae={class:"flex justify-between"},se={class:"slider-section"},le=n(()=>e("div",null,"How much vegetable did you finish?",-1)),ne={class:"flex justify-between"},ie={class:"slider-section"},oe=n(()=>e("div",null,"How much meat did you finish?",-1)),ce={class:"flex justify-between"},re=n(()=>e("div",{class:"text-gray-400 text-xs mx-6"}," * For not applicable food type, please select 100% ",-1)),de={__name:"Create",setup(r){const d=l(90),u=l(90),p=l(90),m=l(90);let w=null;const j=l(null),R=()=>{j.value.click()},V=async a=>{let t=a.target.files[0];const s=await N(t,{quality:1,type:"image/jpeg"});k.value=URL.createObjectURL(t),w=s},k=l(),N=async(a,{quality:t=1,type:s=a.type})=>new Promise((P,ue)=>{let U=new FileReader;U.onloadend=function(B){var i=new Image;i.src=B.target.result,i.style.imageOrientation="from-image",i.onload=async function(pe){let{width:o,height:c}=i,v=400,_=400,f=o,h=c;(o>v||c>_)&&(o/c>v/_?(f=v,h=Math.round(v*(c/o))):(h=_,f=Math.round(_*(o/c))));var y=document.createElement("canvas");y.width=f,y.height=h;var M=y.getContext("2d");M.drawImage(i,0,0,f,h);const H=await new Promise(E=>y.toBlob(E,s,t));P(new File([H],a.name,{type:H.type}))}},U.readAsDataURL(a)}),S=L(),D=async()=>{if(w===null){I.error("Please take a photo first");return}let a=new FormData;a.append("pic",w),a.append("rice",Number(u.value)),a.append("vegetable",Number(p.value)),a.append("meat",Number(m.value)),a.append("overall",Number(d.value)),(await A("post","feedback",a,!0,{"Content-Type":"multipart/form-data"})).error===!1&&(I.success("successfully submitted!"),S.push({path:"/"}))};return(a,t)=>(C(),F("div",J,[O(W),e("input",{ref_key:"uploadFile",ref:j,type:"file",style:{display:"none"},accept:"image/*",capture:"camera",name:"file",onChange:V},null,544),k.value?(C(),F("img",{key:0,class:"pic-preview",src:k.value,onClick:R},null,8,K)):(C(),F("div",{key:1,class:"pic-placehoder flex place-content-center",onClick:R},X)),e("div",Y,[Z,e("div",$,[g(e("input",{type:"range",min:"1",max:"100","onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),class:"slider overall place-self-center"},null,512),[[x,d.value]]),e("div",null,b(d.value)+"%",1)])]),e("div",ee,[te,e("div",ae,[g(e("input",{type:"range",min:"1",max:"100","onUpdate:modelValue":t[1]||(t[1]=s=>u.value=s),class:"slider rice place-self-center"},null,512),[[x,u.value]]),e("div",null,b(u.value)+"%",1)])]),e("div",se,[le,e("div",ne,[g(e("input",{type:"range",min:"1",max:"100","onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),class:"slider vegetable place-self-center"},null,512),[[x,p.value]]),e("div",null,b(p.value)+"%",1)])]),e("div",ie,[oe,e("div",ce,[g(e("input",{type:"range",min:"1",max:"100","onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),class:"slider meat place-self-center"},null,512),[[x,m.value]]),e("div",null,b(m.value)+"%",1)])]),re,e("div",{class:"btn place-content-center text-white text-xl text-center",onClick:D}," Submit ")]))}},ye=z(de,[["__scopeId","data-v-4a8d6568"]]);export{ye as default};
