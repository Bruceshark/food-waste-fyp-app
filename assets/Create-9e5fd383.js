import{i as de,S as ce,a as ve}from"./request-0e84d263.js";import{m as fe}from"./mainHeader-b825e043.js";import{C as pe,v as M,O as me,G as T,s as E,P as he,f as F,H as le,i as t,x as _e,u as ge,o as Y,h as J,w as l,j as _,k as O,l as s,p as be,q as ye}from"./vue-router.esm-bundler-838e7efe.js";import{c as Ce,t as xe,r as ke,v as Fe,m as we}from"./tableware_icon-ac76e79a.js";import{b as oe,a as I,j as ae,c as N,P as $,u as te,t as Ie,_ as Se,m as H}from"./plugin-vueexport-helper-ae293a1c.js";import{o as Pe}from"./omit-d9bae104.js";import"./index-de8f2d7e.js";var Q=Symbol("ContextProps"),X=Symbol("InternalContextProps"),Z={id:pe(function(){}),onFieldBlur:function(){},onFieldChange:function(){},clearValidate:function(){}},ee={addFormItemField:function(){},removeFormItemField:function(){}},ue=function(){var e=M(X,ee),d=Symbol("FormItemFieldKey"),o=he();return e.addFormItemField(d,o.type),me(function(){e.removeFormItemField(d)}),T(X,ee),T(Q,Z),M(Q,Z)};E({compatConfig:{MODE:3},name:"AFormItemRest",setup:function(e,d){var o=d.slots;return T(X,ee),T(Q,Z),function(){var g;return(g=o.default)===null||g===void 0?void 0:g.call(o)}}});var Be=["prefixCls","name","id","type","disabled","readonly","tabindex","autofocus","value","required"],Re={prefixCls:String,name:String,id:String,type:String,defaultChecked:{type:[Boolean,Number],default:void 0},checked:{type:[Boolean,Number],default:void 0},disabled:Boolean,tabindex:{type:[Number,String]},readonly:Boolean,autofocus:Boolean,value:$.any,required:Boolean};const je=E({compatConfig:{MODE:3},name:"Checkbox",inheritAttrs:!1,props:de(Re,{prefixCls:"rc-checkbox",type:"checkbox",defaultChecked:!1}),emits:["click","change"],setup:function(e,d){var o=d.attrs,g=d.emit,k=d.expose,f=F(e.checked===void 0?e.defaultChecked:e.checked),m=F();le(function(){return e.checked},function(){f.value=e.checked}),k({focus:function(){var n;(n=m.value)===null||n===void 0||n.focus()},blur:function(){var n;(n=m.value)===null||n===void 0||n.blur()}});var v=F(),P=function(n){if(!e.disabled){e.checked===void 0&&(f.value=n.target.checked),n.shiftKey=v.value;var x={target:I(I({},e),{},{checked:n.target.checked}),stopPropagation:function(){n.stopPropagation()},preventDefault:function(){n.preventDefault()},nativeEvent:n};e.checked!==void 0&&(m.value.checked=!!e.checked),g("change",x),v.value=!1}},C=function(n){g("click",n),v.value=n.shiftKey};return function(){var b,n=e.prefixCls,x=e.name,u=e.id,i=e.type,a=e.disabled,c=e.readonly,w=e.tabindex,h=e.autofocus,U=e.value,p=e.required,D=oe(e,Be),B=o.class,y=o.onFocus,R=o.onBlur,j=o.onKeydown,G=o.onKeypress,K=o.onKeyup,V=I(I({},D),o),L=Object.keys(V).reduce(function(ne,A){return(A.substr(0,5)==="aria-"||A.substr(0,5)==="data-"||A==="role")&&(ne[A]=V[A]),ne},{}),z=ae(n,B,(b={},N(b,"".concat(n,"-checked"),f.value),N(b,"".concat(n,"-disabled"),a),b)),W=I(I({name:x,id:u,type:i,readonly:c,disabled:a,tabindex:w,class:"".concat(n,"-input"),checked:!!f.value,autofocus:h,value:U},L),{},{onChange:P,onClick:C,onFocus:y,onBlur:R,onKeydown:j,onKeypress:G,onKeyup:K,required:p});return t("span",{class:z},[t("input",I({ref:m},W),null),t("span",{class:"".concat(n,"-inner")},null)])}}});var Ge=["prefixCls","id"],ie=function(){return{prefixCls:String,checked:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},isGroup:{type:Boolean,default:void 0},value:$.any,name:String,id:String,autofocus:{type:Boolean,default:void 0},onChange:Function,onFocus:Function,onBlur:Function,onClick:Function,"onUpdate:checked":Function,"onUpdate:value":Function}};const S=E({compatConfig:{MODE:3},name:"ARadio",props:ie(),setup:function(e,d){var o=d.emit,g=d.expose,k=d.slots,f=ue(),m=F(),v=M("radioGroupContext",void 0),P=te("radio",e),C=P.prefixCls,b=P.direction,n=function(){m.value.focus()},x=function(){m.value.blur()};g({focus:n,blur:x});var u=function(c){var w=c.target.checked;o("update:checked",w),o("update:value",w),o("change",c),f.onFieldChange()},i=function(c){o("change",c),v&&v.onRadioChange&&v.onRadioChange(c)};return function(){var a,c=v;e.prefixCls;var w=e.id,h=w===void 0?f.id.value:w,U=oe(e,Ge),p=I({prefixCls:C.value,id:h},Pe(U,["onUpdate:checked","onUpdate:value"]));c?(p.name=c.props.name,p.onChange=i,p.checked=e.value===c.stateValue.value,p.disabled=e.disabled||c.props.disabled):p.onChange=u;var D=ae((a={},N(a,"".concat(C.value,"-wrapper"),!0),N(a,"".concat(C.value,"-wrapper-checked"),p.checked),N(a,"".concat(C.value,"-wrapper-disabled"),p.disabled),N(a,"".concat(C.value,"-wrapper-rtl"),b.value==="rtl"),a));return t("label",{class:D},[t(je,I(I({},p),{},{type:"radio",ref:m}),null),k.default&&t("span",null,[k.default()])])}}});var Ke=Ie("large","default","small"),Ne=function(){return{prefixCls:String,value:$.any,size:$.oneOf(Ke),options:{type:Array},disabled:{type:Boolean,default:void 0},name:String,buttonStyle:{type:String,default:"outline"},id:String,optionType:{type:String,default:"default"},onChange:Function,"onUpdate:value":Function}};const se=E({compatConfig:{MODE:3},name:"ARadioGroup",props:Ne(),setup:function(e,d){var o=d.slots,g=d.emit,k=ue(),f=te("radio",e),m=f.prefixCls,v=f.direction,P=f.size,C=F(e.value),b=F(!1);le(function(){return e.value},function(x){C.value=x,b.value=!1});var n=function(u){var i=C.value,a=u.target.value;"value"in e||(C.value=a),!b.value&&a!==i&&(b.value=!0,g("update:value",a),g("change",u),k.onFieldChange()),_e(function(){b.value=!1})};return T("radioGroupContext",{onRadioChange:n,stateValue:C,props:e}),function(){var x,u=e.options,i=e.optionType,a=e.buttonStyle,c=e.id,w=c===void 0?k.id.value:c,h="".concat(m.value,"-group"),U=ae(h,"".concat(h,"-").concat(a),(x={},N(x,"".concat(h,"-").concat(P.value),P.value),N(x,"".concat(h,"-rtl"),v.value==="rtl"),x)),p=null;if(u&&u.length>0){var D=i==="button"?"".concat(m.value,"-button"):m.value;p=u.map(function(y){if(typeof y=="string"||typeof y=="number")return t(S,{key:y,prefixCls:D,disabled:e.disabled,value:y,checked:C.value===y},{default:function(){return[y]}});var R=y.value,j=y.disabled,G=y.label;return t(S,{key:"radio-group-value-options-".concat(R),prefixCls:D,disabled:j||e.disabled,value:R,checked:C.value===R},{default:function(){return[G]}})})}else{var B;p=(B=o.default)===null||B===void 0?void 0:B.call(o)}return t("div",{class:U,id:w},[p])}}}),re=E({compatConfig:{MODE:3},name:"ARadioButton",props:ie(),setup:function(e,d){var o=d.slots,g=te("radio-button",e),k=g.prefixCls,f=M("radioGroupContext",void 0);return function(){var m,v=I(I({},e),{},{prefixCls:k.value});return f&&(v.onChange=f.onRadioChange,v.checked=v.value===f.stateValue.value,v.disabled=v.disabled||f.props.disabled),t(S,v,{default:function(){return[(m=o.default)===null||m===void 0?void 0:m.call(o)]}})}}});S.Group=se;S.Button=re;S.install=function(r){return r.component(S.name,S),r.component(S.Group.name,S.Group),r.component(S.Button.name,S.Button),r};const q=r=>(be("data-v-a79629bc"),r=r(),ye(),r),Ue={class:"page"},De=["src"],Ve={class:"input-section"},Ae={class:"my-1 flex"},Oe=q(()=>_("span",null,"How much food did you finish overall?",-1)),Te={class:"w-full text-center"},Ee={class:"input-section"},qe={class:"my-1 flex"},ze=q(()=>_("span",null,"How much rice/noodle did you finish?",-1)),He={class:"w-full text-center"},Me={class:"input-section"},$e={class:"my-1 flex"},Le=q(()=>_("span",null,"How much vegetable did you finish?",-1)),We={class:"w-full text-center"},Ye={class:"input-section"},Je={class:"my-1 flex"},Qe=q(()=>_("span",null,"How much meat did you finish?",-1)),Xe={class:"w-full text-center"},Ze=q(()=>_("div",{class:"text-gray-400 text-sm mx-6"}," * For Not Applicable food type (i.e., not in your meal), please select 100% ",-1)),ea={__name:"Create",setup(r){const e=F(),d=F(),o=F(),g=F(),k=F();let f=null;const m=F(null),v=F(!1),P=()=>{m.value.click()},C=async u=>{let i=u.target.files[0];const a=await b(i,{quality:1,type:"image/jpeg"});k.value=URL.createObjectURL(i),f=a},b=async(u,{quality:i=1,type:a=u.type})=>new Promise((c,w)=>{let h=new FileReader;h.onloadend=function(U){var p=new Image;p.src=U.target.result,p.style.imageOrientation="from-image",p.onload=async function(D){let{width:B,height:y}=p,R=400,j=400,G=B,K=y;(B>R||y>j)&&(B/y>R/j?(G=R,K=Math.round(R*(y/B))):(K=j,G=Math.round(j*(B/y))));var V=document.createElement("canvas");V.width=G,V.height=K;var L=V.getContext("2d");L.drawImage(p,0,0,G,K);const z=await new Promise(W=>V.toBlob(W,a,i));c(new File([z],u.name,{type:z.type}))}},h.readAsDataURL(u)}),n=ge(),x=async()=>{if(f===null){H.error("Please take a photo first");return}if(!d.value||!o.value||!g.value||!e.value){H.error("Please input your completeness");return}v.value=!0;let u=new FormData;u.append("pic",f),u.append("rice",Number(d.value)),u.append("vegetable",Number(o.value)),u.append("meat",Number(g.value)),u.append("overall",Number(e.value));let i=await ve("post","feedback",u,!0,{"Content-Type":"multipart/form-data"});v.value=!1,i.error===!1&&(H.success("successfully submitted!"),i.result.new_badge&&H.success("ðŸŽ‰You got new a badge!ðŸŽ‰"),n.push({path:"/"}),setTimeout(()=>{location.reload()},300))};return(u,i)=>{const a=re,c=se,w=ce;return Y(),J("div",Ue,[t(fe),t(w,{spinning:v.value,tip:"submitting"},{default:l(()=>[_("input",{ref_key:"uploadFile",ref:m,type:"file",style:{display:"none"},accept:"image/*",capture:"camera",name:"file",onChange:C},null,544),k.value?(Y(),J("img",{key:0,class:"pic-preview",src:k.value,onClick:P},null,8,De)):(Y(),J("div",{key:1,class:"pic-placehoder flex place-content-center",onClick:P},[t(O(Ce),{class:"camera-image place-self-center"})])),_("div",Ve,[_("div",Ae,[t(O(xe),{class:"input-icon",fill:""}),Oe]),_("div",Te,[t(c,{value:e.value,"onUpdate:value":i[0]||(i[0]=h=>e.value=h),"button-style":"solid",size:"small"},{default:l(()=>[t(a,{value:"0"},{default:l(()=>[s("0%")]),_:1}),t(a,{value:"20"},{default:l(()=>[s("20%")]),_:1}),t(a,{value:"40"},{default:l(()=>[s("40%")]),_:1}),t(a,{value:"60"},{default:l(()=>[s("60%")]),_:1}),t(a,{value:"80"},{default:l(()=>[s("80%")]),_:1}),t(a,{value:"100"},{default:l(()=>[s("100%")]),_:1})]),_:1},8,["value"])])]),_("div",Ee,[_("div",qe,[t(O(ke),{class:"input-icon",fill:"#F39221"}),ze]),_("div",He,[t(c,{value:d.value,"onUpdate:value":i[1]||(i[1]=h=>d.value=h),"button-style":"solid",size:"small"},{default:l(()=>[t(a,{value:"0"},{default:l(()=>[s("0%")]),_:1}),t(a,{value:"20"},{default:l(()=>[s("20%")]),_:1}),t(a,{value:"40"},{default:l(()=>[s("40%")]),_:1}),t(a,{value:"60"},{default:l(()=>[s("60%")]),_:1}),t(a,{value:"80"},{default:l(()=>[s("80%")]),_:1}),t(a,{value:"100"},{default:l(()=>[s("100%")]),_:1})]),_:1},8,["value"])])]),_("div",Me,[_("div",$e,[t(O(Fe),{class:"input-icon",fill:"#68A885"}),Le]),_("div",We,[t(c,{value:o.value,"onUpdate:value":i[2]||(i[2]=h=>o.value=h),"button-style":"solid",size:"small"},{default:l(()=>[t(a,{value:"0"},{default:l(()=>[s("0%")]),_:1}),t(a,{value:"20"},{default:l(()=>[s("20%")]),_:1}),t(a,{value:"40"},{default:l(()=>[s("40%")]),_:1}),t(a,{value:"60"},{default:l(()=>[s("60%")]),_:1}),t(a,{value:"80"},{default:l(()=>[s("80%")]),_:1}),t(a,{value:"100"},{default:l(()=>[s("100%")]),_:1})]),_:1},8,["value"])])]),_("div",Ye,[_("div",Je,[t(O(we),{class:"input-icon",fill:"#A81E2D"}),Qe]),_("div",Xe,[t(c,{value:g.value,"onUpdate:value":i[3]||(i[3]=h=>g.value=h),"button-style":"solid",size:"small"},{default:l(()=>[t(a,{value:"0"},{default:l(()=>[s("0%")]),_:1}),t(a,{value:"20"},{default:l(()=>[s("20%")]),_:1}),t(a,{value:"40"},{default:l(()=>[s("40%")]),_:1}),t(a,{value:"60"},{default:l(()=>[s("60%")]),_:1}),t(a,{value:"80"},{default:l(()=>[s("80%")]),_:1}),t(a,{value:"100"},{default:l(()=>[s("100%")]),_:1})]),_:1},8,["value"])])]),Ze,_("div",{class:"btn m-auto text-white text-center font-bold",onClick:x}," Submit ")]),_:1},8,["spinning"])])}}},sa=Se(ea,[["__scopeId","data-v-a79629bc"]]);export{sa as default};
